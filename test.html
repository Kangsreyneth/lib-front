<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Book Management Dashboard</title>
  
  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  
  <style>
    :root {
      --sidebar-width: 250px;
      --primary-blue: #4e73df;
      --success-green: #1cc88a;
      --warning-yellow: #f6c23e;
      --danger-red: #e74a3b;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f8f9fc;
      margin: 0;
      overflow-x: hidden;
    }
    
    .sidebar {
      width: var(--sidebar-width);
      min-height: 100vh;
      background: linear-gradient(180deg, #4e73df 0%, #224abe 100%);
      position: fixed;
      left: 0;
      top: 0;
      box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
      z-index: 1000;
    }
    
    .sidebar .brand {
      padding: 1.5rem 1rem;
      text-align: center;
      border-bottom: 1px solid rgba(255, 255, 255, 0.15);
    }
    
    .sidebar .brand h4 {
      color: white;
      margin: 0;
      font-weight: 700;
      font-size: 1.2rem;
    }
    
    .sidebar .nav-section {
      padding: 1rem 0;
    }
    
    .sidebar .nav-section-title {
      color: rgba(255, 255, 255, 0.5);
      font-size: 0.75rem;
      font-weight: 800;
      text-transform: uppercase;
      padding: 0.5rem 1rem;
      margin-top: 1rem;
    }
    
    .sidebar .nav-link {
      color: rgba(255, 255, 255, 0.8);
      padding: 0.75rem 1rem;
      display: flex;
      align-items: center;
      transition: all 0.3s;
      border-left: 3px solid transparent;
    }
    
    .sidebar .nav-link:hover,
    .sidebar .nav-link.active {
      color: white;
      background-color: rgba(255, 255, 255, 0.1);
      border-left-color: white;
    }
    
    .sidebar .nav-link i {
      width: 20px;
      margin-right: 0.75rem;
    }
    
    .sidebar .badge {
      margin-left: auto;
    }
    
    .main-content {
      margin-left: var(--sidebar-width);
      padding: 2rem;
    }
    
    .top-bar {
      background: white;
      padding: 1rem 2rem;
      margin: -2rem -2rem 2rem -2rem;
      box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .top-bar h2 {
      margin: 0;
      color: #5a5c69;
      font-size: 1.75rem;
      font-weight: 400;
    }
    
    .top-bar .user-info {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .top-bar .notifications {
      position: relative;
      cursor: pointer;
    }
    
    .top-bar .notifications .badge {
      position: absolute;
      top: -8px;
      right: -8px;
    }
    
    .stat-card {
      border-left: 4px solid;
      border-radius: 0.35rem;
      box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
      transition: transform 0.3s, box-shadow 0.3s;
    }
    
    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 0.5rem 2rem 0 rgba(58, 59, 69, 0.25);
    }
    
    .stat-card.primary {
      border-left-color: var(--primary-blue);
    }
    
    .stat-card.success {
      border-left-color: var(--success-green);
    }
    
    .stat-card.warning {
      border-left-color: var(--warning-yellow);
    }
    
    .stat-card.danger {
      border-left-color: var(--danger-red);
    }
    
    .stat-card .card-body {
      padding: 1.25rem;
    }
    
    .stat-card .stat-title {
      font-size: 0.7rem;
      font-weight: 700;
      text-transform: uppercase;
      color: var(--primary-blue);
      margin-bottom: 0.5rem;
    }
    
    .stat-card.success .stat-title {
      color: var(--success-green);
    }
    
    .stat-card.warning .stat-title {
      color: var(--warning-yellow);
    }
    
    .stat-card.danger .stat-title {
      color: var(--danger-red);
    }
    
    .stat-card .stat-value {
      font-size: 1.75rem;
      font-weight: 700;
      color: #5a5c69;
      margin: 0;
    }
    
    .stat-card .stat-icon {
      font-size: 2rem;
      color: #dddfeb;
    }
    
    .chart-card {
      background: white;
      border-radius: 0.35rem;
      box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
      margin-bottom: 1.5rem;
    }
    
    .chart-card .card-header {
      background-color: #f8f9fc;
      border-bottom: 1px solid #e3e6f0;
      padding: 0.75rem 1.25rem;
      font-weight: 700;
      color: var(--primary-blue);
    }
    
    .chart-card .card-body {
      padding: 1.25rem;
    }
    
    .loading {
      text-align: center;
      padding: 2rem;
      color: #858796;
    }
    
    .spinner-border {
      width: 3rem;
      height: 3rem;
    }
    
    @media (max-width: 768px) {
      .sidebar {
        width: 100%;
        position: relative;
        min-height: auto;
      }
      
      .main-content {
        margin-left: 0;
      }
    }
  </style>
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <div class="brand">
      <h4><i class="fas fa-book-open"></i> Library System</h4>
    </div>
    
    <div class="nav-section">
      <div class="nav-section-title">Main Navigation</div>
      <a href="#" class="nav-link active">
        <i class="fas fa-tachometer-alt"></i>
        <span>Dashboard</span>
        <span class="badge bg-danger rounded-pill">14</span>
      </a>
      <a href="#" class="nav-link">
        <i class="fas fa-book"></i>
        <span>Books</span>
      </a>
      <a href="#" class="nav-link">
        <i class="fas fa-users"></i>
        <span>Authors</span>
      </a>
      <a href="#" class="nav-link">
        <i class="fas fa-tags"></i>
        <span>Categories</span>
      </a>
      <a href="#" class="nav-link">
        <i class="fas fa-chart-bar"></i>
        <span>Reports</span>
      </a>
    </div>
    
    <div class="nav-section">
      <div class="nav-section-title">User Area</div>
      <a href="#" class="nav-link">
        <i class="fas fa-user"></i>
        <span>Profile</span>
        <span class="badge bg-success rounded-pill">3</span>
      </a>
      <a href="#" class="nav-link">
        <i class="fab fa-github"></i>
        <span>Github</span>
      </a>
      <a href="#" class="nav-link">
        <i class="fab fa-twitter"></i>
        <span>Twitter</span>
      </a>
      <a href="#" class="nav-link">
        <i class="fab fa-facebook"></i>
        <span>Facebook</span>
      </a>
      <a href="#" class="nav-link">
        <i class="fas fa-cog"></i>
        <span>Settings</span>
      </a>
      <a href="#" class="nav-link">
        <i class="fas fa-sign-out-alt"></i>
        <span>Logout</span>
      </a>
    </div>
  </div>
  
  <!-- Main Content -->
  <div class="main-content">
    <!-- Top Bar -->
    <div class="top-bar">
      <h2><i class="fas fa-tachometer-alt"></i> Dashboard</h2>
      <div class="user-info">
        <div class="notifications">
          <i class="fas fa-bell fa-lg text-secondary"></i>
          <span class="badge bg-danger rounded-pill">6</span>
        </div>
        <div class="notifications">
          <i class="fas fa-envelope fa-lg text-secondary"></i>
          <span class="badge bg-success rounded-pill">8</span>
        </div>
        <button class="btn btn-primary btn-sm">
          <i class="fas fa-calendar-alt"></i> This Week
        </button>
      </div>
    </div>
    
    <!-- Loading State -->
    <div id="loadingState" class="loading">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="mt-3">Loading dashboard data...</p>
    </div>
    
    <!-- Dashboard Content (Hidden Initially) -->
    <div id="dashboardContent" style="display: none;">
      <!-- Stat Cards -->
      <div class="row g-3 mb-4">
        <div class="col-xl-3 col-md-6">
          <div class="card stat-card primary">
            <div class="card-body">
              <div class="row align-items-center">
                <div class="col">
                  <div class="stat-title">Total Books</div>
                  <div class="stat-value" id="totalBooks">0</div>
                </div>
                <div class="col-auto">
                  <i class="fas fa-book stat-icon"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="col-xl-3 col-md-6">
          <div class="card stat-card success">
            <div class="card-body">
              <div class="row align-items-center">
                <div class="col">
                  <div class="stat-title">Books Borrowed</div>
                  <div class="stat-value" id="booksBorrowed">0</div>
                </div>
                <div class="col-auto">
                  <i class="fas fa-book-reader stat-icon"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="col-xl-3 col-md-6">
          <div class="card stat-card warning">
            <div class="card-body">
              <div class="row align-items-center">
                <div class="col">
                  <div class="stat-title">Active Members</div>
                  <div class="stat-value" id="activeMembers">0</div>
                </div>
                <div class="col-auto">
                  <i class="fas fa-users stat-icon"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="col-xl-3 col-md-6">
          <div class="card stat-card danger">
            <div class="card-body">
              <div class="row align-items-center">
                <div class="col">
                  <div class="stat-title">Overdue Books</div>
                  <div class="stat-value" id="overdueBooks">0</div>
                </div>
                <div class="col-auto">
                  <i class="fas fa-exclamation-triangle stat-icon"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Charts Row -->
      <div class="row g-4">
        <div class="col-lg-6">
          <div class="chart-card">
            <div class="card-header d-flex justify-content-between align-items-center">
              <span>Book Categories Distribution</span>
              <div class="dropdown">
                <button class="btn btn-sm btn-link text-decoration-none" type="button">
                  <i class="fas fa-ellipsis-v"></i>
                </button>
              </div>
            </div>
            <div class="card-body">
              <canvas id="doughnutChart" height="300"></canvas>
            </div>
          </div>
        </div>
        
        <div class="col-lg-6">
          <div class="chart-card">
            <div class="card-header d-flex justify-content-between align-items-center">
              <span>Monthly Borrowing Trends</span>
              <div class="dropdown">
                <button class="btn btn-sm btn-link text-decoration-none" type="button">
                  <i class="fas fa-ellipsis-v"></i>
                </button>
              </div>
            </div>
            <div class="card-body">
              <canvas id="barChart" height="300"></canvas>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Additional Info Row -->
      <div class="row g-4 mt-2">
        <div class="col-lg-12">
          <div class="chart-card">
            <div class="card-header">Recent Activity</div>
            <div class="card-body">
              <div class="table-responsive">
                <table class="table table-hover" id="recentActivity">
                  <thead>
                    <tr>
                      <th>Book Title</th>
                      <th>Member</th>
                      <th>Action</th>
                      <th>Date</th>
                      <th>Status</th>
                    </tr>
                  </thead>
                  <tbody>
                    <!-- Data will be loaded via AJAX -->
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  
  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
  
  <script>
    $(document).ready(function() {
      // Simulate AJAX call to fetch dashboard data
      setTimeout(function() {
        fetchDashboardData();
      }, 1500);
      
      function fetchDashboardData() {
        // Simulated AJAX call - Replace with your actual API endpoint
        $.ajax({
          url: 'https://mocki.io/v1/9e0d6fdb-d3b0-4b79-9b24-650cbd27c2d5',
          method: 'GET',
          success: function(response) {
            // Use mock data if API fails or for demo purposes
            const data = {
              totalBooks: 1250,
              booksBorrowed: 387,
              activeMembers: 542,
              overdueBooks: 23,
              categoryData: {
                labels: ['Fiction', 'Non-Fiction', 'Science', 'History', 'Biography', 'Children'],
                values: [320, 280, 195, 145, 180, 130]
              },
              monthlyData: {
                labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],
                fiction: [65, 70, 60, 75, 80, 85, 90],
                nonFiction: [45, 50, 48, 60, 65, 70, 75],
                science: [30, 35, 40, 45, 50, 55, 60]
              },
              recentActivity: [
                { book: 'The Great Gatsby', member: 'John Doe', action: 'Borrowed', date: '2025-01-15', status: 'Active' },
                { book: '1984', member: 'Jane Smith', action: 'Returned', date: '2025-01-14', status: 'Completed' },
                { book: 'To Kill a Mockingbird', member: 'Bob Johnson', action: 'Borrowed', date: '2025-01-13', status: 'Active' },
                { book: 'Pride and Prejudice', member: 'Alice Williams', action: 'Overdue', date: '2024-12-20', status: 'Overdue' },
                { book: 'The Catcher in the Rye', member: 'Charlie Brown', action: 'Returned', date: '2025-01-12', status: 'Completed' }
              ]
            };
            
            updateDashboard(data);
          },
          error: function() {
            // Fallback to mock data
            const mockData = {
              totalBooks: 1250,
              booksBorrowed: 387,
              activeMembers: 542,
              overdueBooks: 23,
              categoryData: {
                labels: ['Fiction', 'Non-Fiction', 'Science', 'History', 'Biography', 'Children'],
                values: [320, 280, 195, 145, 180, 130]
              },
              monthlyData: {
                labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],
                fiction: [65, 70, 60, 75, 80, 85, 90],
                nonFiction: [45, 50, 48, 60, 65, 70, 75],
                science: [30, 35, 40, 45, 50, 55, 60]
              },
              recentActivity: [
                { book: 'The Great Gatsby', member: 'John Doe', action: 'Borrowed', date: '2025-01-15', status: 'Active' },
                { book: '1984', member: 'Jane Smith', action: 'Returned', date: '2025-01-14', status: 'Completed' },
                { book: 'To Kill a Mockingbird', member: 'Bob Johnson', action: 'Borrowed', date: '2025-01-13', status: 'Active' },
                { book: 'Pride and Prejudice', member: 'Alice Williams', action: 'Overdue', date: '2024-12-20', status: 'Overdue' },
                { book: 'The Catcher in the Rye', member: 'Charlie Brown', action: 'Returned', date: '2025-01-12', status: 'Completed' }
              ]
            };
            
            updateDashboard(mockData);
          }
        });
      }
      
      function updateDashboard(data) {
        // Hide loading, show content
        $('#loadingState').fadeOut(300, function() {
          $('#dashboardContent').fadeIn(300);
        });
        
        // Update stat cards with animation
        animateValue('totalBooks', 0, data.totalBooks, 1000);
        animateValue('booksBorrowed', 0, data.booksBorrowed, 1000);
        animateValue('activeMembers', 0, data.activeMembers, 1000);
        animateValue('overdueBooks', 0, data.overdueBooks, 1000);
        
        // Create Doughnut Chart
        const doughnutCtx = document.getElementById('doughnutChart').getContext('2d');
        new Chart(doughnutCtx, {
          type: 'doughnut',
          data: {
            labels: data.categoryData.labels,
            datasets: [{
              data: data.categoryData.values,
              backgroundColor: [
                '#4e73df',
                '#1cc88a',
                '#36b9cc',
                '#f6c23e',
                '#e74a3b',
                '#858796'
              ],
              borderWidth: 2,
              borderColor: '#fff'
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                position: 'bottom',
                labels: {
                  padding: 15,
                  font: {
                    size: 12
                  }
                }
              },
              tooltip: {
                callbacks: {
                  label: function(context) {
                    const label = context.label || '';
                    const value = context.parsed || 0;
                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                    const percentage = ((value / total) * 100).toFixed(1);
                    return label + ': ' + value + ' (' + percentage + '%)';
                  }
                }
              }
            }
          }
        });
        
        // Create Bar Chart
        const barCtx = document.getElementById('barChart').getContext('2d');
        new Chart(barCtx, {
          type: 'bar',
          data: {
            labels: data.monthlyData.labels,
            datasets: [
              {
                label: 'Fiction',
                data: data.monthlyData.fiction,
                backgroundColor: '#4e73df',
                borderRadius: 5
              },
              {
                label: 'Non-Fiction',
                data: data.monthlyData.nonFiction,
                backgroundColor: '#1cc88a',
                borderRadius: 5
              },
              {
                label: 'Science',
                data: data.monthlyData.science,
                backgroundColor: '#36b9cc',
                borderRadius: 5
              }
            ]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                position: 'bottom',
                labels: {
                  padding: 15,
                  font: {
                    size: 12
                  }
                }
              }
            },
            scales: {
              y: {
                beginAtZero: true,
                grid: {
                  color: 'rgba(0, 0, 0, 0.05)'
                }
              },
              x: {
                grid: {
                  display: false
                }
              }
            }
          }
        });
        
        // Populate Recent Activity Table
        const tbody = $('#recentActivity tbody');
        tbody.empty();
        
        data.recentActivity.forEach(function(activity) {
          let statusBadge = '';
          if (activity.status === 'Active') {
            statusBadge = '<span class="badge bg-success">Active</span>';
          } else if (activity.status === 'Completed') {
            statusBadge = '<span class="badge bg-primary">Completed</span>';
          } else if (activity.status === 'Overdue') {
            statusBadge = '<span class="badge bg-danger">Overdue</span>';
          }
          
          const row = `
            <tr>
              <td>${activity.book}</td>
              <td>${activity.member}</td>
              <td>${activity.action}</td>
              <td>${activity.date}</td>
              <td>${statusBadge}</td>
            </tr>
          `;
          tbody.append(row);
        });
      }
      
      // Animate number counting
      function animateValue(id, start, end, duration) {
        const element = document.getElementById(id);
        const range = end - start;
        const increment = range / (duration / 16);
        let current = start;
        
        const timer = setInterval(function() {
          current += increment;
          if (current >= end) {
            current = end;
            clearInterval(timer);
          }
          element.textContent = Math.floor(current);
        }, 16);
      }
    });
  </script>
</body>
</html>